<?php

namespace CTRV\CommonBundle\Entity;

use Doctrine\ORM\EntityRepository;

use Doctrine\ORM\Mapping as ORM;


class UserRepository extends EntityRepository
{
    
	public function getUsers ($city) {
		$qb = $this->createQueryBuilder("p")
		->where("p.city=?1")
		->orderBy('p.registrationDate', 'DESC')
		->setParameter(1, $city)
		
		;
		return $qb->getQuery()->getResult();
	}
	public function getUsersConnected ($city) {
		$qb = $this->createQueryBuilder("p")
		->where("p.registrationDate is not null")
		->andWhere("p.city=?1")
		->orderBy('p.registrationDate', 'DESC')
		->setParameter(1, $city)
	
		;
		return $qb->getQuery()->getResult();
	}
	public function getAllUsers () {
		$qb = $this->createQueryBuilder("p")
		->orderBy('p.registrationDate', 'DESC')
		;
		return $qb->getQuery()->getResult();
	}
}